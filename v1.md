# Lock PDF + URL Agent v1

> **Version:** v1 (Locked)
>
> **Status:** Scope frozen
>
> **Goal:** Create a lightweight personal agent that can ingest a small PDF or a single webpage, summarize it, and allow voice-based Q&A grounded strictly in that content.

---

## 1. Purpose

Lock PDF + URL Agent v1 is a **personal, single-session conversational agent** that allows the user to:

* Upload a small PDF **or** paste a URL
* Convert the content into a concise, structured summary
* Ask spoken questions about that content
* Receive spoken answers grounded only in the provided document

This version prioritizes **completion, speed, and clarity** over scale.

---

## 2. Non-Goals (Explicitly Out of Scope)

The following are **not supported in v1**:

* Large PDFs (e.g. textbooks, manuals)
* Chunking or pagination handling
* Multi-document ingestion
* Embeddings or vector search
* Long-term memory
* Background processing
* Link crawling or deep search
* External knowledge augmentation

Anything beyond the defined limits must be rejected clearly.

---

## 3. Input Constraints (Hard Limits)

### 3.1 PDF Constraints

* **Maximum pages:** 20
* **Maximum text length:** ~30,000 characters
* **Content type:** Text-only PDFs
* **Behavior on exceed:** Reject with error message

Example rejection message:

> "This PDF is too large for v1. Please upload a smaller document."

---

### 3.2 URL Constraints

* Single webpage only
* No pagination support
* No internal or external link following
* **Maximum extracted text:** ~15,000 characters
* HTML cleaned to readable text only

Example rejection message:

> "This webpage is too large or complex for v1."

---

## 4. Supported Models

| Role                     | Model                   |
| ------------------------ | ----------------------- |
| Text summarization & Q&A | `gemini-2.5-flash-lite` |
| Audio generation (TTS)   | `gemini-2.5-flash-tts`  |

The system operates as a **single logical agent** with sequential model calls.

---

## 5. Processing Flow

### 5.1 Ingestion Flow

```
User uploads PDF / pastes URL
↓
Size & constraint validation
↓
Text extraction
↓
Summarization (Gemini Flash-Lite)
↓
Structured context stored in memory
```

---

### 5.2 Conversation Flow

```
User speaks question
↓
Speech-to-text
↓
Context-bound Q&A (Gemini Flash-Lite)
↓
Answer text
↓
Text-to-speech (Gemini Flash-TTS)
↓
Audio playback
```

---

## 6. Context Creation

### 6.1 Summarization Prompt (v1)

```text
You are summarizing a document for conversational use.

Produce:
- A short overview
- 5–10 key points
- Important definitions or concepts (if any)

Keep it concise, factual, and neutral.
```

---

### 6.2 Context Storage Schema

```json
{
  "title": "Document Title",
  "source": "pdf | url",
  "overview": "...",
  "key_points": ["...", "..."],
  "definitions": ["..."]
}
```

This summary object is the **only knowledge source** for Q&A.

---

## 7. Q&A Rules

The agent must follow these rules strictly:

* Answers **must** be derived from the stored summary
* No external knowledge is allowed
* No guessing or inference beyond the document
* If the answer is missing:

```text
"I don’t see that in this document."
```

Responses must be:

* Short
* Clear
* Spoken-language friendly

---

## 8. Error Handling

All failures must be **explicit and user-visible**.

| Scenario                    | Behavior            |
| --------------------------- | ------------------- |
| PDF too large               | Reject with message |
| URL too long                | Reject with message |
| Unsupported PDF type        | Reject              |
| Empty or unreadable content | Reject              |

No silent truncation is allowed.

---

## 9. UI Scope (Minimal)

### Feature 1: Ingestion

* Upload PDF **or** paste URL
* "Process" button
* Clear validation feedback

### Feature 2: Conversation

* Push-to-talk microphone
* Automatic audio playback
* Optional text transcript

No history. No
